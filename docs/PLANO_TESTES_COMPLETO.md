# üß™ Plano de Testes Completo - AutomateAI MVP

**Data:** 06/10/2025  
**Vers√£o:** 1.0  
**Status:** Pronto para Execu√ß√£o

---

## üéØ Objetivos dos Testes

1. ‚úÖ Validar sistema de tratamento de erros
2. ‚úÖ Validar cards amig√°veis e toggle de modo
3. ‚úÖ Validar fallback autom√°tico de IA
4. ‚úÖ Validar valida√ß√µes e mensagens
5. ‚úÖ Identificar bugs cr√≠ticos antes do deploy

---

## üìä Categorias de Teste

### **1. Testes de Interface (UI)**

### **2. Testes de Sistema de Erros**

### **3. Testes de Fallback de IA**

### **4. Testes de Valida√ß√£o**

### **5. Testes de Performance**

---

## üé® CATEGORIA 1: Testes de Interface (UI)

### **Teste 1.1: Toggle de Modo**

**Objetivo:** Verificar se o toggle entre modos funciona corretamente

**Passos:**

1. Abrir `/builder`
2. Criar novo agente (modo visual)
3. Verificar se toggle "üë§ Modo Simples" est√° vis√≠vel
4. Clicar no toggle
5. Verificar mudan√ßa para "‚öôÔ∏è Modo Avan√ßado"
6. Verificar se paleta mudou

**Resultado Esperado:**

- ‚úÖ Toggle vis√≠vel apenas no modo visual
- ‚úÖ Texto do bot√£o muda corretamente
- ‚úÖ Cor do bot√£o muda (roxo ‚Üí cinza)
- ‚úÖ Paleta renderiza FriendlyNodePalette ou NodePalette

**Status:** ‚è≥ Aguardando execu√ß√£o

---

### **Teste 1.2: Cards Amig√°veis - Modo Simples**

**Objetivo:** Verificar se cards amig√°veis aparecem corretamente

**Passos:**

1. Abrir `/builder` em modo visual
2. Garantir que est√° em "Modo Simples"
3. Verificar paleta lateral esquerda
4. Contar n√∫mero de cards
5. Verificar categorias

**Resultado Esperado:**

- ‚úÖ 4 categorias vis√≠veis:
  - üì• RECEBER DADOS
  - ü§ñ ANALISAR COM IA
  - ‚öñÔ∏è VALIDAR E VERIFICAR
  - üì§ ENVIAR E GERAR
- ‚úÖ 8 cards no total
- ‚úÖ Nomes em portugu√™s claro
- ‚úÖ √çcones apropriados

**Status:** ‚è≥ Aguardando execu√ß√£o

---

### **Teste 1.3: Cards Avan√ßados - Modo Desenvolvedor**

**Objetivo:** Verificar se cards t√©cnicos aparecem no modo avan√ßado

**Passos:**

1. Abrir `/builder` em modo visual
2. Clicar em "‚öôÔ∏è Modo Avan√ßado"
3. Verificar paleta lateral
4. Verificar nomenclatura

**Resultado Esperado:**

- ‚úÖ Cards t√©cnicos aparecem (Input, AI Processing, Logic, etc.)
- ‚úÖ Nomenclatura t√©cnica mantida
- ‚úÖ Todas as funcionalidades dispon√≠veis

**Status:** ‚è≥ Aguardando execu√ß√£o

---

### **Teste 1.4: Drag and Drop de Cards**

**Objetivo:** Verificar se cards podem ser arrastados para o canvas

**Passos:**

1. Modo Simples ativado
2. Arrastar card "üìÑ Receber Documento" para o canvas
3. Arrastar card "üìã Analisar Contrato" para o canvas
4. Conectar os dois cards
5. Verificar propriedades

**Resultado Esperado:**

- ‚úÖ Cards aparecem no canvas
- ‚úÖ Conex√£o funciona
- ‚úÖ Propriedades pr√©-preenchidas corretamente
- ‚úÖ Labels em portugu√™s

**Status:** ‚è≥ Aguardando execu√ß√£o

---

## üõ°Ô∏è CATEGORIA 2: Testes de Sistema de Erros

### **Teste 2.1: Erro de Valida√ß√£o - Agente Sem N√≥s**

**Objetivo:** Verificar mensagem de erro quando agente n√£o tem n√≥s

**Passos:**

1. Abrir `/builder`
2. Criar agente vazio (sem n√≥s)
3. Tentar executar
4. Verificar mensagem de erro

**Resultado Esperado:**

- ‚úÖ Erro aparece antes de chamar API
- ‚úÖ Mensagem: "Agente deve ter pelo menos um n√≥ configurado"
- ‚úÖ Tipo: VALIDATION_ERROR
- ‚úÖ Bot√£o de retry n√£o aparece (n√£o √© retryable)

**Status:** ‚è≥ Aguardando execu√ß√£o

---

### **Teste 2.2: Erro de Valida√ß√£o - JSON Inv√°lido**

**Objetivo:** Verificar tratamento de JSON inv√°lido na API

**M√©todo:** Teste via curl/Postman

```bash
curl -X POST http://localhost:3000/api/agents/execute \
  -H "Content-Type: application/json" \
  -d '{"agent": "invalid json"}'
```

**Resultado Esperado:**

```json
{
  "success": false,
  "error": {
    "type": "VALIDATION_ERROR",
    "message": "Configura√ß√£o do agente est√° em formato inv√°lido (JSON inv√°lido)",
    "suggestedAction": "Verifique os dados informados e tente novamente.",
    "retryable": true
  }
}
```

**Status:** ‚è≥ Aguardando execu√ß√£o

---

### **Teste 2.3: Erro de Documento Ausente**

**Objetivo:** Verificar erro quando agente requer documento mas n√£o foi enviado

**Passos:**

1. Criar agente com card "üìã Analisar Contrato"
2. Configurar prompt que menciona "documento"
3. Executar SEM enviar arquivo
4. Verificar erro

**Resultado Esperado:**

- ‚úÖ Erro claro aparece
- ‚úÖ Mensagem: "Este agente requer um documento, mas nenhum arquivo foi processado"
- ‚úÖ A√ß√£o sugerida: "Fa√ßa upload de um documento..."
- ‚úÖ Alert visual vermelho no ExecutionPanel

**Status:** ‚è≥ Aguardando execu√ß√£o

---

### **Teste 2.4: Rate Limiting**

**Objetivo:** Verificar se rate limiting funciona

**M√©todo:** Script de teste

```bash
# Fazer 101 requisi√ß√µes em menos de 1 minuto
for i in {1..101}; do
  curl -X POST http://localhost:3000/api/agents/execute \
    -H "Content-Type: application/json" \
    -d '{"agent": {...}}' &
done
wait
```

**Resultado Esperado:**

- ‚úÖ Primeiras 100 requisi√ß√µes: 200 OK
- ‚úÖ 101¬™ requisi√ß√£o: 429 Too Many Requests
- ‚úÖ Headers presentes:
  - `X-RateLimit-Limit: 100`
  - `X-RateLimit-Remaining: 0`
  - `Retry-After: 60`

**Status:** ‚è≥ Aguardando execu√ß√£o

---

### **Teste 2.5: Timeout Autom√°tico**

**Objetivo:** Verificar se timeout de 30s funciona

**M√©todo:** Criar agente com processamento lento

**Passos:**

1. Criar agente com m√∫ltiplos n√≥s de IA
2. Usar prompt muito longo
3. Executar e aguardar
4. Verificar timeout ap√≥s 30s

**Resultado Esperado:**

- ‚úÖ Timeout ap√≥s 30 segundos
- ‚úÖ Erro: TIMEOUT_ERROR
- ‚úÖ Mensagem clara
- ‚úÖ Sugest√£o de usar arquivo menor

**Status:** ‚è≥ Aguardando execu√ß√£o

---

## ü§ñ CATEGORIA 3: Testes de Fallback de IA

### **Teste 3.1: Fallback OpenAI ‚Üí Google**

**Objetivo:** Verificar fallback quando OpenAI falha

**M√©todo:** Desabilitar temporariamente OpenAI API key

**Passos:**

1. Comentar `OPENAI_API_KEY` no `.env`
2. Criar agente com card "üìã Analisar Contrato"
3. Executar agente
4. Verificar logs

**Resultado Esperado:**

- ‚úÖ Log: "‚ö†Ô∏è Provider openai falhou, tentando pr√≥ximo..."
- ‚úÖ Sistema tenta Google AI automaticamente
- ‚úÖ Execu√ß√£o bem-sucedida com Google
- ‚úÖ Log: "‚úÖ Provider google bem-sucedido"

**Status:** ‚è≥ Aguardando execu√ß√£o

---

### **Teste 3.2: Fallback Completo (Todos Providers)**

**Objetivo:** Verificar comportamento quando todos os providers falham

**M√©todo:** Desabilitar todas as API keys

**Passos:**

1. Comentar todas as API keys no `.env`
2. Executar agente
3. Verificar erro final

**Resultado Esperado:**

- ‚úÖ Sistema tenta todos os providers
- ‚úÖ Logs de cada tentativa
- ‚úÖ Erro final claro: "Todos os provedores de IA falharam"
- ‚úÖ Sugest√£o: "Verifique suas credenciais de API"

**Status:** ‚è≥ Aguardando execu√ß√£o

---

### **Teste 3.3: Quota Exceeded com Retry**

**Objetivo:** Verificar retry quando quota √© excedida

**M√©todo:** Simular quota exceeded (mock)

**Resultado Esperado:**

- ‚úÖ Erro: AI_QUOTA_EXCEEDED
- ‚úÖ Delay de 60 segundos antes do retry
- ‚úÖ M√°ximo 3 tentativas
- ‚úÖ Fallback para outro provider

**Status:** ‚è≥ Aguardando execu√ß√£o

---

## ‚úÖ CATEGORIA 4: Testes de Valida√ß√£o

### **Teste 4.1: Valida√ß√£o de Texto Extra√≠do**

**Objetivo:** Verificar valida√ß√£o de qualidade do texto do PDF

**Passos:**

1. Criar agente "Analisar Contrato"
2. Enviar PDF corrompido ou vazio
3. Verificar erro

**Resultado Esperado:**

- ‚úÖ Erro: FILE_PROCESSING_ERROR
- ‚úÖ Mensagem: "Texto extra√≠do est√° vazio ou muito curto"
- ‚úÖ Sugest√£o: "Verifique se o arquivo est√° corrompido"

**Status:** ‚è≥ Aguardando execu√ß√£o

---

### **Teste 4.2: Valida√ß√£o de Tamanho de Arquivo**

**Objetivo:** Verificar limite de 50MB

**Passos:**

1. Tentar enviar arquivo > 50MB
2. Verificar erro no frontend

**Resultado Esperado:**

- ‚úÖ Erro aparece antes do upload
- ‚úÖ Mensagem: "Arquivo muito grande. M√°ximo: 50MB"
- ‚úÖ Upload bloqueado

**Status:** ‚è≥ Aguardando execu√ß√£o

---

### **Teste 4.3: Valida√ß√£o de Estrutura do Agente**

**Objetivo:** Verificar valida√ß√£o de estrutura m√≠nima

**Passos:**

1. Enviar agente sem campo `nodes`
2. Enviar agente com `nodes: []`
3. Verificar erros

**Resultado Esperado:**

- ‚úÖ Erro: VALIDATION_ERROR
- ‚úÖ Mensagem espec√≠fica para cada caso
- ‚úÖ Status 400 Bad Request

**Status:** ‚è≥ Aguardando execu√ß√£o

---

## ‚ö° CATEGORIA 5: Testes de Performance

### **Teste 5.1: Tempo de Resposta da API**

**Objetivo:** Verificar tempo de resposta aceit√°vel

**M√©todo:** Medir tempo de execu√ß√£o

**Resultado Esperado:**

- ‚úÖ Valida√ß√µes: < 100ms
- ‚úÖ Execu√ß√£o simples (1 n√≥): < 5s
- ‚úÖ Execu√ß√£o complexa (5 n√≥s): < 20s

**Status:** ‚è≥ Aguardando execu√ß√£o

---

### **Teste 5.2: Renderiza√ß√£o do Canvas**

**Objetivo:** Verificar performance do canvas com muitos n√≥s

**Passos:**

1. Criar agente com 20 n√≥s
2. Arrastar e conectar n√≥s
3. Verificar fluidez

**Resultado Esperado:**

- ‚úÖ Sem lag percept√≠vel
- ‚úÖ Drag and drop suave
- ‚úÖ Zoom e pan funcionando

**Status:** ‚è≥ Aguardando execu√ß√£o

---

## üß™ CATEGORIA 6: Testes de Integra√ß√£o

### **Teste 6.1: Fluxo Completo - An√°lise de Contrato**

**Objetivo:** Testar fluxo end-to-end completo

**Passos:**

1. Abrir `/builder`
2. Modo Simples ativado
3. Arrastar "üìÑ Receber Documento"
4. Arrastar "üìã Analisar Contrato"
5. Conectar os cards
6. Configurar prompt
7. Salvar agente
8. Executar com PDF real
9. Verificar resultado

**Resultado Esperado:**

- ‚úÖ Todos os passos funcionam
- ‚úÖ PDF processado corretamente
- ‚úÖ IA analisa o contrato
- ‚úÖ Resultado retornado
- ‚úÖ Sem erros

**Status:** ‚è≥ Aguardando execu√ß√£o

---

### **Teste 6.2: Fluxo com Erro e Recovery**

**Objetivo:** Testar recupera√ß√£o de erro

**Passos:**

1. Executar agente sem arquivo (erro)
2. Ver mensagem de erro
3. Clicar em "Tentar Novamente"
4. Enviar arquivo correto
5. Executar novamente
6. Verificar sucesso

**Resultado Esperado:**

- ‚úÖ Erro aparece claramente
- ‚úÖ Bot√£o de retry funciona
- ‚úÖ Segunda execu√ß√£o bem-sucedida
- ‚úÖ Estado limpo entre execu√ß√µes

**Status:** ‚è≥ Aguardando execu√ß√£o

---

## üìä Checklist de Execu√ß√£o

### **Pr√©-requisitos**

- [ ] Servidor rodando (`npm run dev`)
- [ ] Banco de dados conectado
- [ ] API keys configuradas
- [ ] Ambiente de teste preparado

### **Testes de UI (6 testes)**

- [ ] 1.1 - Toggle de Modo
- [ ] 1.2 - Cards Amig√°veis
- [ ] 1.3 - Cards Avan√ßados
- [ ] 1.4 - Drag and Drop

### **Testes de Erros (5 testes)**

- [ ] 2.1 - Agente Sem N√≥s
- [ ] 2.2 - JSON Inv√°lido
- [ ] 2.3 - Documento Ausente
- [ ] 2.4 - Rate Limiting
- [ ] 2.5 - Timeout

### **Testes de Fallback (3 testes)**

- [ ] 3.1 - Fallback OpenAI ‚Üí Google
- [ ] 3.2 - Fallback Completo
- [ ] 3.3 - Quota Exceeded

### **Testes de Valida√ß√£o (3 testes)**

- [ ] 4.1 - Texto Extra√≠do
- [ ] 4.2 - Tamanho de Arquivo
- [ ] 4.3 - Estrutura do Agente

### **Testes de Performance (2 testes)**

- [ ] 5.1 - Tempo de Resposta
- [ ] 5.2 - Renderiza√ß√£o

### **Testes de Integra√ß√£o (2 testes)**

- [ ] 6.1 - Fluxo Completo
- [ ] 6.2 - Erro e Recovery

---

## üìù Relat√≥rio de Bugs

### **Template de Bug**

```markdown
**ID:** BUG-001
**Severidade:** Alta/M√©dia/Baixa
**Categoria:** UI/Erro/Fallback/Valida√ß√£o/Performance
**Descri√ß√£o:** [Descri√ß√£o detalhada]
**Passos para Reproduzir:** [Passos]
**Resultado Esperado:** [O que deveria acontecer]
**Resultado Atual:** [O que aconteceu]
**Screenshot:** [Se aplic√°vel]
**Prioridade:** P0/P1/P2/P3
```

---

## ‚úÖ Crit√©rios de Sucesso

**Para aprovar para produ√ß√£o:**

- ‚úÖ Todos os testes de UI passando (100%)
- ‚úÖ Todos os testes de Erros passando (100%)
- ‚úÖ Pelo menos 2/3 testes de Fallback passando (67%)
- ‚úÖ Todos os testes de Valida√ß√£o passando (100%)
- ‚úÖ Testes de Performance aceit√°veis (> 80%)
- ‚úÖ Pelo menos 1 teste de Integra√ß√£o completo passando

**Bugs bloqueadores:**

- ‚ùå Nenhum bug de severidade ALTA n√£o resolvido
- ‚ùå M√°ximo 3 bugs de severidade M√âDIA n√£o resolvidos

---

## üöÄ Pr√≥ximos Passos Ap√≥s Testes

1. ‚úÖ Corrigir bugs cr√≠ticos encontrados
2. ‚úÖ Documentar bugs conhecidos (n√£o cr√≠ticos)
3. ‚úÖ Criar guia de troubleshooting
4. ‚úÖ Preparar para deploy em staging
5. ‚úÖ Agendar testes com usu√°rios reais
